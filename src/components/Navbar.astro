---
import VidiLogo from "../images/vidi-logo.png";
import { Image } from "astro:assets";
import { Menu } from "@lucide/astro";
---

<nav
  class="flex bg-transparent justify-between px-4 lg:justify-start md:justify-start items-center font-sans absolute w-full top-0 z-30"
>
  <div class="lg:flex-1/3 flex place-content-center">
    <Image
      id="logo"
      src={VidiLogo}
      alt="Vidi Logo"
      class="w-[150px] h-[100px] md:w-[200px] md:h-[100px] lg:w-[200px] lg:h-[100px] cursor-pointer"
    />
  </div>
  <ul
    class="hidden md:flex-2/3 md:flex lg:flex lg:flex-2/3 uppercase text-white justify-evenly"
  >
    <li>
      <a
        href="/"
        class="border-b-red-500 hover:border-b-2 transition-all duration-75 delay-[20ms] pb-0.5"
        >Home</a
      >
    </li>
    <li>
      <a
        href="/about"
        class="border-b-red-500 hover:border-b-2 transition-all duration-75 delay-[20ms] pb-0.5"
        >About us</a
      >
    </li>
    <li>
      <a
        href="/projects"
        class="border-b-red-500 hover:border-b-2 transition-all duration-75 delay-[20ms] pb-0.5"
        >Projects</a
      >
    </li>
    <li>
      <a
        href="/news"
        class="border-b-red-500 hover:border-b-2 transition-all duration-75 delay-[20ms] pb-0.5"
        >News</a
      >
    </li>
    <li>
      <a
        href="/contact"
        class="border-b-red-500 hover:border-b-2 transition-all duration-75 delay-[20ms] pb-0.5"
        >Contact us</a
      >
    </li>
  </ul>

  <Menu
    class="text-white lg:hidden md:hidden cursor-pointer"
    id="menu-button"
  />
</nav>

<script>
  import { animate, utils, createSpring } from "animejs";

  const logo = document.querySelector("#logo");
  const menuButton = document.querySelector("#menu-button");
  const mobilePane = document.querySelector(".mobile-pane") as HTMLElement;
  handleNavigation(logo);

  function handleNavigation(target: Element | null) {
    target?.addEventListener("click", () => {
      window.location.href = "/";
    });
  }

  menuButton?.addEventListener("click", handleVisibility);

  function handleVisibility() {
    const style = window.getComputedStyle(mobilePane);
    const opacity = style.getPropertyValue("opacity");
    const body = document.querySelector("body") as HTMLElement;
    const overlay = document.querySelector(".overlay") as HTMLElement;
    // console.log(opacity);
    if (opacity === "0") {
      animate(".mobile-pane", {
        display: "flex",
        opacity: 1,
        // scale: 1,
        zIndex: "30",
        width: "50%",
        ease: "out(4)",
        duration: 700,
      });
      body.style.overflowY = "hidden";
      overlay.style.display = "block";
    }
  }
</script>

<style>
  #menu-button {
    z-index: 20;
  }
</style>
